image:
  repository: acore/ac-wotlk-server
  pullPolicy: IfNotPresent
  tag: latest

workload:
  main:
    enabled: true
    podSpec:
      containers:
        main:
          ports:
            - name: authserver
              containerPort: 3724
              protocol: tcp
            - name: worldserver
              containerPort: 8085
              protocol: tcp

          probes:
            liveness:
              type: tcp
              port: 3724  # Use authserver port for liveness
              initialDelaySeconds: 30
              periodSeconds: 10

            readiness:
              type: tcp
              port: 3724  # Use authserver port for readiness
              initialDelaySeconds: 30
              periodSeconds: 10

            startup:
              type: tcp
              port: 3724  # Use authserver port for startup
              initialDelaySeconds: 60
              periodSeconds: 10

service:
  main:
    enabled: true
    type: LoadBalancer
    ports:
      authserver:
        enabled: true
        port: 3724
        targetPort: 3724
        protocol: tcp
      worldserver:
        enabled: true
        port: 8085
        targetPort: 8085
        protocol: tcp

additionalContainers:
  mysql:
    enabled: true
    image: mysql:5.7
    env:
      - name: MYSQL_ROOT_PASSWORD
        value: "acore"
      - name: MYSQL_DATABASE
        value: "acore_world"
      - name: MYSQL_USER
        value: "acore"
      - name: MYSQL_PASSWORD
        value: "acore"
    volumeMounts:
      - name: mysql-data
        mountPath: /var/lib/mysql

additionalVolumes:
  - name: azerothcore-data
    nfs:
      path: "${NFS_GAME_SERVERS}/wow-1/data"
      server: "${NAS_IP}"
  
  - name: mysql-data
    nfs:
      path: "${NFS_GAME_SERVERS}/wow-1/mysql"
      server: "${NAS_IP}"

volumeMounts:
  - name: azerothcore-data
    mountPath: /azerothcore/data

  - name: mysql-data
    mountPath: /var/lib/mysql
